<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTDMapper3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.salem.domain.Mapper.SitterMapper">
	
	<!-- <select id="showAllSitters" resultType="SitterVO">
		SELECT 
			sitterNo, sittingType, sitterEmail, sitterName,  
			sitterAddress, sitterImg1, sitterImg2, sitterImg3, sitterImg4, 
			sitterImg5, possibleDay, sitterGender, sitterAge, profileTitle, profile, petProfile, 
			approvalStatus
		FROM sitter
		JOIN sitting_type AS type
		WHERE sitter.sittingNo = type.sittingNo;
	</select> -->
	
	<select id="showSitterDetail" resultType="SitterVO" parameterType="int">
		SELECT 
			sitterNo, sittingType, sitterEmail, sitterName, sitterPw, sitterPhone, 
			sitterAddress, sitterImg1, sitterImg2, sitterImg3, sitterImg4, 
			sitterImg5, possibleDay, sitterGender, sitterAge, profileTitle, profile, petProfile, 
			identityCheck, qualificationCheck, approvalStatus, approvalDate
		FROM sitter
		JOIN sitting_type AS type
		ON (sitter.sittingNo = type.sittingNo)
		WHERE sitterNo=#{sitterNo}
	</select>
	
	<select id="showDaySitters" resultType="SitterVO">
		SELECT 
			sitterNo, sittingType, sitterEmail, sitterName,  
			sitterAddress, sitterImg1, sitterImg2, sitterImg3, sitterImg4, 
			sitterImg5, possibleDay, sitterGender, sitterAge, profileTitle, profile, petProfile, 
			approvalStatus
		FROM sitter
		JOIN sitting_type AS type
		ON (sitter.sittingNo = type.sittingNo)
		WHERE sittingType = 'daycare'; 
	</select>
	
	<select id="test" >  
		select count(*), u.userName, u.userEmail, u.userPhone, u.userAddress, pay.paymentNo, pay.startTime, pay.endTime, s.sitterName,s.sitterPhone, st.sittingType
        from users u 
        inner join pet p on u.userNo=p.userNo
        inner join reservation r on p.petNo=r.petNo
        inner join payment pay on pay.paymentNo=r.paymentNo
        inner join sitter s on s.sitterNo=pay.sitterNo
        inner join sitting_type st on st.sittingNo=s.sittingNo
        where DATE_FORMAT(pay.paymentDate, "%Y-%m-%d")=curdate() and st.sittingType=#{type};
    </select>
	
</mapper>
